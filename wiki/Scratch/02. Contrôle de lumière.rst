2 Project : Light Control System
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In this project, we will construct a light control system by a
photoresistor and an LED. It is an intelligent system to adjust light,
which saves energy and enhance efficiency as well.

.. image:: ./scratch_img/cout2.png
   :alt: img

This system is compatible with multiple conditions. Thanks to its
photoresistor, it is able to detect the light intensity in day or at
night, realizing a more intelligent and energy-saving system.

When the photoresistor detects that ambient brightness is lower than the
set value, LED lights up. On the contrary, if the ambient light
intensity is higher than the set value, photorisistor will send a
different signal to turn off the LED.

--------------



2.1 Flow Diagram
^^^^^^^^^^^^^^^^^^

.. image:: ./scratch_img/image-20230607175802112.png
   :alt: image-20230607175802112

--------------



2.2 Photoresistor
^^^^^^^^^^^^^^^^^^^

**Description:**

A photoresistor, also called photosensor, converts light signal into
electric signal (voltage, current, and resistor).

**Working principle:**

We place a photoresistor in a circuit in series connection and add
suitable voltage to both poles. When there is no light, the resistance
is infinite and the circuit almost opens. However, when there is light,
the resistance decreases while the current increases, and it is
equivalent to a short circuit when the light intensity is sufficient.

Now we will read the value of photoresistor by programming on ESP32
development board.

.. image:: ./scratch_img/cou2.png
   :alt: img

--------------

**Schematic Diagram:**

When light hits the photoresistor, the stronger the light is, the
smaller the resistance will be, so the greater the VCC voltage will pass
through the resistor.

.. image:: ./scratch_img/couy21.png
   :alt: img

**Parameters:**

-  Voltage: 3~5V

-  Current: 0.2mA

-  Power: 1mW

-  Spectrum Peak Value: 540nm

-  Bright Resistance (10lux): 5~10KR

-  Dark Resistance: 0.5MR

--------------

**Wiring Diagram:**

**Connect the photoresistor to io3**

**Attention: Connect yellow to S(Signal), red to V(Power), and black to
GND. Do not reverse them!**

.. image:: ./scratch_img/couj21.png
   :alt: img

--------------

**Test Code:**

-  Initialize the serial port.

   .. image:: ./scratch_img/st48.png
      :alt: img

-  Define a global variable "**item**" as the photoresistor value.

   .. image:: ./scratch_img/st49.png
      :alt: img

-  Set "**item**" to the read value and print it on serial monitor.

   .. image:: ./scratch_img/st50.png
      :alt: img

Complete code:

.. image:: ./scratch_img/st51.png
   :alt: img

--------------

**Test Result:**

Open the serial monitor.

The brighter the light detected by the photoresistor is, the greater the
value will be.

.. image:: ./scratch_img/st52.png
   :alt: img

--------------



2.3 Light Control System
^^^^^^^^^^^^^^^^^^^^^^^^^^

**Wiring Diagram:**

**Connect the photoresistor to io34 and LED to io27.**

**Attention: Connect yellow to S(Signal), red to V(Power), and black to
GND. Do not reverse them!**

.. image:: ./scratch_img/couj22.png
   :alt: img

--------------

**Test Code:**

Code Flow:

.. image:: ./scratch_img/flo2.png
   :alt: img

-  Determine:

   -  The value of the photoresistor >= 800, LED turns off.
   -  The value of the photoresistor =< 800, LED turns on.

   .. image:: ./scratch_img/st53.png
      :alt: img

Complete code:

.. image:: ./scratch_img/st5png
   :alt: img

**Test Result:**

When the value of the photoresistor is greater than 800 (in daytime),
LED goes off. However, if the value is less than 800, LED will
automatically light on.

.. image:: ./scratch_img/st55.png
   :alt: img

--------------

\**Various conditions can adopt this type of system. Thanks to its
photoresistor, it is able to detect the light intensity in day or at
night, which saves energy and intellectualize the whole system. \*\*

--------------



2.2 FAQ
^^^^^^^^^

**Q: The value of the photoresistor cannot be 0.**

A: In actual life, little light exists although you turn off all lights
in your room, so the value of photoresistor only approaches to 0 rather
than equals to 0.

--------------

**Q: After uploading code, LED doesn't light up even though the room is
dark without lights.**

A: Increase the determined value of photoresistor. In our example, we
set to 800. So you may adjust it to 1000 or a greater value.

.. image:: ./scratch_img/st53.png
   :alt: img

--------------



