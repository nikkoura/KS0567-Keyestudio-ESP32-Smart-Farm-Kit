
Dans ce projet, nous allons construire un système de contrôle de la lumière à l'aide d'une photorésistance et d'une LED. Il s'agit d'un système intelligent pour ajuster la lumière, permettant d'économiser de l'énergie et d'améliorer l'efficacité.

.. image:: ./scratch_img/cout2.png
   :alt: img

Ce système est compatible avec de multiples conditions. Grâce à sa photorésistance, il est capable de détecter l'intensité lumineuse de jour ou de nuit, réalisant ainsi un système plus intelligent et économe en énergie.

Lorsque la photorésistance détecte que la luminosité ambiante est inférieure à la valeur définie, la LED s’allume. À l'inverse, si l'intensité lumineuse ambiante est supérieure à la valeur définie, la photorésistance enverra un signal différent pour éteindre la LED.

--------------

2.1 Diagramme de flux
^^^^^^^^^^^^^^^^^^

.. image:: ./scratch_img/image-20230607175802112.png
   :alt: image-20230607175802112

--------------

2.2 Photorésistance
^^^^^^^^^^^^^^^^^^^

**Description :**

Une photorésistance, aussi appelée capteur de lumière, convertit le signal lumineux en signal électrique (tension, courant et résistance).

**Principe de fonctionnement :**

Nous plaçons une photorésistance dans un circuit en connexion série et appliquons une tension appropriée aux deux pôles. Lorsqu'il n'y a pas de lumière, la résistance est infinie et le circuit est quasiment ouvert. Cependant, lorsqu'il y a de la lumière, la résistance diminue tandis que le courant augmente, et cela équivaut à un court-circuit lorsque l'intensité lumineuse est suffisante.

Nous allons maintenant lire la valeur de la photorésistance par programmation sur une carte de développement ESP32.

.. image:: ./scratch_img/cou2.png
   :alt: img

--------------

**Schéma électrique :**

Lorsque la lumière atteint la photorésistance, plus la lumière est forte, plus la résistance est faible, donc plus la tension VCC traversera la résistance.

.. image:: ./scratch_img/couy21.png
   :alt: img

**Paramètres :**

-  Tension : 3~5V
-  Courant : 0,2mA
-  Puissance : 1mW
-  Valeur du pic de spectre : 540nm
-  Résistance à la lumière (10lux) : 5~10kΩ
-  Résistance à l'obscurité : 0,5MΩ

--------------

**Schéma de câblage :**

**Connectez la photorésistance à io3**

**Attention : Connectez le fil jaune à S (Signal), le rouge à V (Alimentation), et le noir à GND. Ne les inversez pas !**

.. image:: ./scratch_img/couj21.png
   :alt: img

--------------

**Code de test :**

-  Initialisez le port série.

   .. image:: ./scratch_img/st48.png
      :alt: img

-  Définissez une variable globale "**item**" comme la valeur de la photorésistance.

   .. image:: ./scratch_img/st49.png
      :alt: img

-  Affectez à "**item**" la valeur lue et affichez-la sur le moniteur série.

   .. image:: ./scratch_img/st50.png
      :alt: img

Code complet :

.. image:: ./scratch_img/st51.png
   :alt: img

--------------

**Résultat du test :**

Ouvrez le moniteur série.

Plus la lumière détectée par la photorésistance est intense, plus la valeur sera élevée.

.. image:: ./scratch_img/st52.png
   :alt: img

--------------

2.3 Système de contrôle de la lumière
^^^^^^^^^^^^^^^^^^^^^^^^^^

**Schéma de câblage :**

**Connectez la photorésistance à io34 et la LED à io27.**

**Attention : Connectez le fil jaune à S (Signal), le rouge à V (Alimentation), et le noir à GND. Ne les inversez pas !**

.. image:: ./scratch_img/couj22.png
   :alt: img

--------------

**Code de test :**

Flux du code :

.. image:: ./scratch_img/flo2.png
   :alt: img

-  Déterminer :
   -  Si la valeur de la photorésistance >= 800, la LED s'éteint.
   -  Si la valeur de la photorésistance =< 800, la LED s’allume.

   .. image:: ./scratch_img/st53.png
      :alt: img

Code complet :

.. image:: ./scratch_img/st5.png
   :alt: img

**Résultat du test :**

Lorsque la valeur de la photorésistance est supérieure à 800 (en journée), la LED s’éteint. Cependant, si la valeur est inférieure à 800, la LED s’allume automatiquement.

.. image:: ./scratch_img/st55.png
   :alt: img

--------------

**Diverses conditions peuvent adopter ce type de système. Grâce à sa photorésistance, il est capable de détecter l’intensité lumineuse de jour ou de nuit, ce qui permet d’économiser de l’énergie et d’intellectualiser tout le système.**

--------------

2.2 FAQ
^^^^^^^^^^

**Q : La valeur de la photorésistance ne peut pas être 0.**

R : En réalité, il existe toujours un peu de lumière même si vous éteignez toutes les lumières de votre pièce, donc la valeur de la photorésistance ne fait qu’approcher 0 sans jamais l’atteindre.

--------------

**Q : Après avoir téléchargé le code, la LED ne s’allume pas même si la pièce est sombre sans lumière.**

R : Augmentez la valeur déterminée de la photorésistance. Dans notre exemple, nous avons défini 800. Vous pouvez donc l’ajuster à 1000 ou une valeur supérieure.

.. image:: ./scratch_img/st53.png
   :alt: img

--------------
