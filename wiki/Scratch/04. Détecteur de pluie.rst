4 Projet : Système de détection de pluie
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**REMARQUE : Asperger de l’eau sur les capteurs (sauf le capteur de vapeur) peut provoquer un court-circuit ou endommager les modules. Si les piles sont mouillées, il peut même y avoir un risque d’explosion. Soyez extrêmement prudent ! Pour les jeunes utilisateurs, veuillez opérer avec vos parents. Pour garantir la sécurité, veuillez suivre les directives et les règlements de sécurité.**

--------------

Dans ce projet, nous allons créer un système de détection de pluie avec un capteur de vapeur. Lorsqu’il détecte la pluie, l’ESP32 déclenche diverses actions comme l’envoi de messages, l’activation des arroseurs et l’allumage des lumières. Grâce à ce système, la quantité de précipitations peut être surveillée et les fuites d’eau peuvent également être détectées sur les toits ou dans les bâtiments.

De plus, il est facile de connecter le capteur de vapeur à la carte ESP32, ce qui forme un système de détection de la pluie simple mais efficace.

.. image:: ./scratch_img/cout4.png
   :alt: img

--------------

1 Diagramme de flux
^^^^^^^^^^^^^^^^^^

.. image:: ./scratch_img/image-20230607180917475.png
   :alt: image-20230607180917475

--------------

2 Capteur de vapeur
^^^^^^^^^^^^^^^^^^

**Description :**

Le capteur de vapeur détecte la présence d’eau, il est donc généralement utilisé dans la détection de pluie. Si la pluie touche la plaque conductrice du capteur, il enverra un signal à la carte Arduino.

.. image:: ./scratch_img/cou41.png
   :alt: img

--------------

**Schéma :**

.. image:: ./scratch_img/couy41.png
   :alt: img

**Paramètres :**

- Tension : 3~5V
- Courant : 1,5mA
- Puissance : 7,5mW

--------------

**Schéma de câblage :**

**Connecter le capteur de vapeur à io35.**

**Attention : Connectez le fil jaune à S (Signal), le rouge à V (Alimentation), et le noir à GND. Ne les inversez pas !**

.. image:: ./scratch_img/couj41.png
   :alt: img

--------------

**Code de test :**

- Initialiser le port série.

   .. image:: ./scratch_img/st67.png
      :alt: img

- Lire la valeur du capteur sur la broche io35 et l’afficher chaque seconde.

   .. image:: ./scratch_img/st68.png
      :alt: img

Code complet :

.. image:: ./scratch_img/st69.png
   :alt: img

**Résultat du test :**

Touchez la zone de détection avec un doigt mouillé. Plus la zone touchée est grande, plus la valeur sera élevée.

Vous pouvez ouvrir le moniteur série pour observer la valeur détectée actuellement (plage : 0~4095).

.. image:: ./scratch_img/st70.png
   :alt: img

--------------

3 Système de détection de pluie
^^^^^^^^^^^^^^^^^^^^^^^^^^

**Description :**

Lorsque le capteur de vapeur détecte la pluie, il envoie un signal à la carte pour déclencher diverses actions, par exemple, le buzzer retentit pour signaler qu’il pleut. Ceci est particulièrement utile pour le jardinage et l’agriculture en extérieur, permettant aux utilisateurs de prendre les précautions nécessaires pour éviter un arrosage excessif.

De plus, ce système peut être utilisé pour détecter les fuites d’eau afin d’éviter des dommages dus à l’infiltration. Globalement, le capteur de vapeur est polyvalent et efficace dans diverses applications.

--------------

**Schéma de câblage :**

**Connecter le capteur de vapeur à io35 et le buzzer à io16.**

**Attention : Connectez le fil jaune à S (Signal), le rouge à V (Alimentation), et le noir à GND. Ne les inversez pas !**

.. image:: ./scratch_img/couj42.png
   :alt: img

--------------

**Code de test :**

Flux du code :

.. image:: ./scratch_img/flopng
   :alt: img

Code :

- Initialiser le port série, et définir une variable **item** comme la valeur reçue du capteur.

   .. image:: ./scratch_img/st71.png
      :alt: img

- Recevoir la valeur du capteur et l’afficher sur le moniteur série.

   .. image:: ./scratch_img/st72.png
      :alt: img

- La valeur reçue détectée par le capteur est comprise entre 800 ~ 1999 :

   .. image:: ./scratch_img/st73.png
      :alt: img

- La valeur reçue détectée par le capteur est comprise entre 2000 ~ 2999 :

   .. image:: ./scratch_img/st7png
      :alt: img

- La valeur reçue détectée par le capteur est supérieure à 3000 :

   .. image:: ./scratch_img/st75.png
      :alt: img

- À la fin des blocs de code, ajoutez "**No Tone**" pour éteindre le buzzer.

   .. image:: ./scratch_img/st76.png
      :alt: img

Code complet :

.. image:: ./scratch_img/st77.png
   :alt: img

**Résultat du test :**

Plus la valeur détectée est élevée, plus le son émis par le buzzer sera fort.

--------------

4 FAQ
^^^^^^^^^

Q : Le capteur de vapeur est-il étanche ?

R : La zone de détection peut être exposée à l’eau, mais les jonctions de fils ne sont pas étanches. Lors de l’expérience, faites attention à ne pas mettre trop d’eau pour éviter les courts-circuits.

--------------

Q : Même après un long moment depuis la détection d’eau par le capteur, le buzzer continue de sonner.

R : Il continue de sonner car il reste encore des gouttes d’eau dans la zone de détection. Il suffit de la nettoyer.

--------------
